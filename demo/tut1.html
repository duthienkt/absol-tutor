<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Tut1</title>
    <script src="../dist/absol.dependents.js?<?php  echo stat('../dist/absol.dependents.js')['mtime'];?>"></script>
    <script src="../dist/absol-tutor.js?<?php  echo stat('../dist/absol-tutor.js')['mtime'];?>"></script>
    <link rel="icon" href="//absol.cf/favicon.ico">
</head>

<body>
<style>
    body {
        min-height: 90vh;
        font-size: 14px;
    }

    .preview {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: 100%;
        overflow: auto;
    }

    .example-select-ctn {
        position: fixed;
        z-index: 100000000;
        right: 10px;
        top: 10px;
        padding: 5px;
        background: white;
        box-shadow: 1px 1px 3px 1px rgba(0, 0, 0, 0.3);
    }

</style>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Aguafina+Script"/>
<body>
<div class="preview as-bscroller">
</div>
</body>
<script>

</script>
<div class="example-select-ctn"></div>
<script>
    (function () {
        var _ = absol._;
        var $ = absol.$;

        var previewDiv = $('.preview');
        fetch('https://absol.cf/absol-tutor/demo_page.html').then(res => res.text()).then(html => {
            previewDiv.innerHTML = html;
            var oldSelectMenu = document.getElementsByTagName('selecttreemenu')[0];
            var contructMenuDesc = absol.Dom.getConstructDescriptor(oldSelectMenu);
            contructMenuDesc.props = contructMenuDesc.props || {};
            contructMenuDesc.props.enableSearch = true;
            fetch('https://absol.cf/absol-tutor/demo_items.json').then(res => res.json()).then(items => contructMenuDesc.props.items = items)
                .then(() => {
                    var realSelectMenu = absol._(contructMenuDesc);
                    oldSelectMenu.parentElement.replaceChild(realSelectMenu, oldSelectMenu)
                });
            absol.require('checkboxinput').autoReplace();
            absol.$('.card-icon-cover', false, function (elt) {
                absol.require('quickmenu').toggleWhenClick(elt, {
                    getMenuProps: function () {
                        return {
                            items: [{ "text": "Sửa", "icon": "<i class=\"material-icons\">mode_edit</i>" }, {
                                "text": "Xóa",
                                "icon": "<i class=\"material-icons\">delete</i>"
                            }, {
                                "text": "Thêm mục tiêu chiến lược con",
                                "icon": "<i class=\"material-icons\">add_circle_outline</i>"
                            }]
                        }
                    }
                });
            })
        });
    })();
</script>
</body>

</html>
